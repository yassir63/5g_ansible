#!/usr/bin/env bash
# Generated by Ansible — DO NOT EDIT

# =========================
# PLMN
# =========================
MCC="{{ plmn.mcc }}"
MNC="{{ plmn.mnc }}"
TAC="{{ plmn.tac }}"

# =========================
# Slices
# =========================
{% for slice in slices %}
SLICE{{ loop.index }}_SST="{{ slice.sst }}"
SLICE{{ loop.index }}_SD="{{ slice.sd }}"
SLICE{{ loop.index }}_5QI="{{ slice.qos.five_qi }}"
SLICE{{ loop.index }}_ARP_PRIORITY_LEVEL="{{ slice.qos.arp.priority_level }}"
SLICE{{ loop.index }}_ARP_PREEMPT_CAP="{{ slice.qos.arp.preempt_cap }}"
SLICE{{ loop.index }}_ARP_PREEMPT_VULN="{{ slice.qos.arp.preempt_vuln }}"
SLICE{{ loop.index }}_PRIORITY_LEVEL="{{ slice.qos.priority_level }}"
SLICE{{ loop.index }}_UPLINK="{{ slice.bandwidth.uplink }}"
SLICE{{ loop.index }}_DOWNLINK="{{ slice.bandwidth.downlink }}"
SLICE{{ loop.index }}_IP_PREFIX="{{ slice.ip_prefix }}"

{% endfor %}

# =========================
# Security
# =========================
FULL_KEY="{{ security.full_key }}"
OPC="{{ security.opc }}"

# =========================
# UE → slice mapping
# =========================
UE_SLICE_MAP=(
{% for ue_name, ue in ues.items() %}
  "{{ ue.imsi_suffix }}:{{
      slices | selectattr('name','equalto',ue.slice) | list | first | attr('name') | regex_replace('slice','')
  }}"
{% endfor %}
)
